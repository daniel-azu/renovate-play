{"version":3,"file":"extract.js","sourceRoot":"","sources":["../../../lib/manager/travis/extract.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,0DAAkC;AAClC,qCAA+B;AAC/B,mFAAqE;AACrE,yCAAsC;AAGtC,SAAgB,kBAAkB,CAAC,OAAe;IAChD,iBAAiB;IACjB,IAAI,GAAQ,CAAC;IACb,IAAI;QACF,GAAG,GAAG,IAAA,cAAI,EAAC,OAAO,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;KACrC;IAAC,OAAO,GAAG,EAAE;QACZ,eAAM,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,mCAAmC,CAAC,CAAC;QACnE,OAAO,IAAI,CAAC;KACb;IACD,IAAI,IAAI,GAAwB,EAAE,CAAC;IACnC,IAAI,GAAG,IAAI,YAAE,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;QAChC,IAAI,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;YACxC,OAAO,EAAE,MAAM;YACf,UAAU,EAAE,oBAAoB,CAAC,EAAE;YACnC,UAAU,EAAE,aAAa;YACzB,YAAY,EAAE,YAAY,CAAC,QAAQ,EAAE;SACtC,CAAC,CAAC,CAAC;KACL;IACD,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;QAChB,OAAO,IAAI,CAAC;KACb;IACD,OAAO,EAAE,IAAI,EAAE,CAAC;AAClB,CAAC;AAtBD,gDAsBC","sourcesContent":["import is from '@sindresorhus/is';\nimport { load } from 'js-yaml';\nimport * as datasourceGithubTags from '../../datasource/github-tags';\nimport { logger } from '../../logger';\nimport type { PackageDependency, PackageFile } from '../types';\n\nexport function extractPackageFile(content: string): PackageFile | null {\n  // TODO: fix type\n  let doc: any;\n  try {\n    doc = load(content, { json: true });\n  } catch (err) {\n    logger.warn({ err, content }, 'Failed to parse .travis.yml file.');\n    return null;\n  }\n  let deps: PackageDependency[] = [];\n  if (doc && is.array(doc.node_js)) {\n    deps = doc.node_js.map((currentValue) => ({\n      depName: 'node',\n      datasource: datasourceGithubTags.id,\n      lookupName: 'nodejs/node',\n      currentValue: currentValue.toString(),\n    }));\n  }\n  if (!deps.length) {\n    return null;\n  }\n  return { deps };\n}\n"]}