{"version":3,"file":"util.js","sourceRoot":"","sources":["../../../lib/manager/pip_setup/util.ts"],"names":[],"mappings":";;;;;;AAAA,+BAA+B;AAC/B,iCAA6B;AAC7B,sFAAmD;AACnD,sCAA0E;AAG1E,8CAA8C;AAC9C,MAAM,MAAM,GAAG,gCAAgC,CAAC;AAChD,MAAM,OAAO,GAAG,+BAA+B,CAAC;AAEhD,IAAI,SAA6B,CAAC;AAE3B,KAAK,UAAU,cAAc;IAClC,IAAI,SAAS,EAAE;QACb,OAAO,SAAS,CAAC;KAClB;IAED,SAAS,GAAG,IAAA,YAAI,EAAC,MAAM,IAAA,mBAAc,EAAC,WAAW,CAAC,EAAE,OAAO,CAAC,CAAC;IAC7D,MAAM,IAAA,eAAU,EAAC,SAAS,EAAE,8BAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC;IAE9D,OAAO,SAAS,CAAC;AACnB,CAAC;AATD,wCASC;AAEM,KAAK,UAAU,WAAW,CAAC,WAAmB;IACnD,MAAM,IAAI,GAAG,MAAM,IAAA,kBAAa,EAAC,IAAA,YAAI,EAAC,IAAA,cAAO,EAAC,WAAW,CAAC,EAAE,MAAM,CAAC,EAAE,MAAM,CAAC,CAAC;IAC7E,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC1B,CAAC;AAHD,kCAGC","sourcesContent":["import { dirname } from 'path';\nimport { join } from 'upath';\nimport dataFiles from '../../data-files.generated';\nimport { ensureCacheDir, outputFile, readLocalFile } from '../../util/fs';\nimport type { PythonSetup } from './types';\n\n// need to match filename in `data/extract.py`\nconst REPORT = 'renovate-pip_setup-report.json';\nconst EXTRACT = 'renovate-pip_setup-extract.py';\n\nlet extractPy: string | undefined;\n\nexport async function getExtractFile(): Promise<string> {\n  if (extractPy) {\n    return extractPy;\n  }\n\n  extractPy = join(await ensureCacheDir('pip_setup'), EXTRACT);\n  await outputFile(extractPy, dataFiles.get('data/extract.py'));\n\n  return extractPy;\n}\n\nexport async function parseReport(packageFile: string): Promise<PythonSetup> {\n  const data = await readLocalFile(join(dirname(packageFile), REPORT), 'utf8');\n  return JSON.parse(data);\n}\n"]}